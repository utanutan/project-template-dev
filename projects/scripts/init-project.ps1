# ============================================
# Antigravity Life OS - Project Initializer (Windows)
# ============================================
# Usage: .\init-project.ps1 -ProjectName "my-app" -Type "dev"

param(
    [Parameter(Mandatory=$true, Position=0)]
    [string]$ProjectName,
    
    [Parameter(Mandatory=$false)]
    [ValidateSet("dev", "creative", "life")]
    [string]$Type = "dev"
)

$WorkspaceRoot = Split-Path -Parent (Split-Path -Parent $PSScriptRoot)
$ProjectPath = Join-Path $WorkspaceRoot "projects" $ProjectName

Write-Host "ğŸš€ Initializing project: $ProjectName" -ForegroundColor Blue
Write-Host "   Type: $Type"
Write-Host "   Path: $ProjectPath"
Write-Host ""

# Create project structure
$folders = @("src", "tests", "docs", "spec", "research", "resources\mockups", "tracks")
foreach ($folder in $folders) {
    $path = Join-Path $ProjectPath $folder
    New-Item -ItemType Directory -Path $path -Force | Out-Null
}
Write-Host "âœ“ Created directory structure" -ForegroundColor Green

# Copy appropriate template
$libraryPath = Join-Path $WorkspaceRoot "library"
switch ($Type) {
    "dev" {
        Copy-Item (Join-Path $libraryPath "dev-templates\PRP_TEMPLATE.md") (Join-Path $ProjectPath "docs\PRP.md")
        Write-Host "âœ“ Copied PRP template" -ForegroundColor Green
    }
    "creative" {
        Copy-Item (Join-Path $libraryPath "creative-templates\CONTENT_TEMPLATE.md") (Join-Path $ProjectPath "docs\CONTENT.md")
        Write-Host "âœ“ Copied Content template" -ForegroundColor Green
    }
    "life" {
        Copy-Item (Join-Path $libraryPath "life-templates\WEEKLY_PLANNER.md") (Join-Path $ProjectPath "docs\PLANNER.md")
        Write-Host "âœ“ Copied Planner template" -ForegroundColor Green
    }
}

# Copy CLAUDE.md
$claudeTemplate = Join-Path $libraryPath "claude-templates\CLAUDE.md"
if (Test-Path $claudeTemplate) {
    Copy-Item $claudeTemplate (Join-Path $ProjectPath "CLAUDE.md")
    Write-Host "âœ“ Copied CLAUDE.md" -ForegroundColor Green
}

# Create README
$readme = @"
# $ProjectName

**Type:** $Type
**Created:** $(Get-Date -Format "yyyy-MM-dd")
**Status:** Initial

---

## Overview
[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¦‚è¦ã‚’ã“ã“ã«è¨˜è¼‰]

## Structure
``````
$ProjectName/
â”œâ”€â”€ src/              # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ tests/            # ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ docs/             # PRPç­‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ spec/             # å®Ÿè£…ãƒ—ãƒ©ãƒ³
â”œâ”€â”€ research/         # èª¿æŸ»çµæœ
â”œâ”€â”€ resources/mockups # ãƒ‡ã‚¶ã‚¤ãƒ³
â””â”€â”€ tracks/           # ä¸¦åˆ—å®Ÿè¡Œãƒˆãƒ©ãƒƒã‚¯
``````

## Quick Start
1. ``docs/PRP.md`` ã«è¦ä»¶ã‚’è¨˜è¼‰
2. PMã«è¨­è¨ˆä¾é ¼
3. ä¸¦åˆ—å®Ÿè£…é–‹å§‹

---
*Generated by Antigravity Life OS*
"@

$readme | Out-File -FilePath (Join-Path $ProjectPath "README.md") -Encoding UTF8
Write-Host "âœ“ Created README.md" -ForegroundColor Green

# Create .gitkeep files
$gitkeepFolders = @("src", "tests", "spec", "research", "tracks")
foreach ($folder in $gitkeepFolders) {
    $keepPath = Join-Path $ProjectPath $folder ".gitkeep"
    New-Item -ItemType File -Path $keepPath -Force | Out-Null
}

Write-Host ""
Write-Host "âœ… Project initialized successfully!" -ForegroundColor Green
Write-Host ""
Write-Host "Next steps:"
Write-Host "  1. cd $ProjectPath"
Write-Host "  2. Edit docs\PRP.md with your requirements"
Write-Host "  3. Start development with Agent Guild"
